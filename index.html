<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>영상 탐정단의 움직이는 비밀: 진짜가 궁금해요</title>
<style>
  :root{
    --bg:#e6f2ff;--panel:#ffffffee;--muted:#64748b;--text:#1f2937;
    --accent:#247cff;--accent2:#3c92fb;--good:#16a34a;--bad:#ef4444;
    --ring:#0b65f5;--soft:#f8fafc;--border:#e5e7eb;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#fff);
      color:var(--text);font:16px/1.5 system-ui,Segoe UI,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif}
  .max{max-width:1100px;margin:0 auto;padding:20px;display:flex;flex-direction:column;height:100%}
  .card{background:var(--panel);backdrop-filter:blur(8px);border:1px solid var(--border);
        border-radius:18px;box-shadow:0 8px 24px #00000010}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .grow{flex:1}
  .headline{font-size:clamp(22px,3.2vw,30px);font-weight:900;margin:0}
  .sub{color:var(--muted);font-size:14px}
  .btn, .ghost{appearance:none;border:0;border-radius:18px;padding:10px 18px;font-size:18px;font-weight:800;cursor:pointer}
  header{margin-bottom:16px;flex-shrink:0}
  .btn{color:#fff;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 8px 18px #247cff33}
  .ghost{background:#fff;color:var(--text);border:1px solid var(--border)}
  label{font-size:18px; cursor: pointer;}
  .screen{padding:22px}
  .screens-wrapper{flex-grow:1;min-height:0;display:flex;flex-direction:column}
  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
  .thumb{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--border);background:#fff;display:flex;flex-direction:column}
  .thumb video{width:100%;height:180px;object-fit:cover;display:block; background:#000;}
  .thumb .ghost{position:absolute;right:12px;bottom:12px;padding:14px 18px;font-size:18px}
  .stage{position:relative;border-radius:18px;overflow:hidden;border:1px solid var(--border);background:var(--soft)}
  .stage video{width:100%;height:100%;display:block; background:#000;}

  #screen-start[hidden], #screen-play[hidden]{display:none !important}
  #screen-play:not([hidden]){display:flex;flex-direction:column;flex-grow:1}
  #screen-play:not([hidden]) .stage{flex-grow:1;min-height:0}

  /* 단서 원(정답/오답) */
  .hotspot{position:absolute;border:3px dashed var(--ring);border-radius:999px;transform:translate(-50%,-50%);
          width:72px;height:72px;pointer-events:none;opacity:0;transition:.25s}
  .hotspot.found{border-color:var(--good);box-shadow:0 0 0 6px #16a34a33}
  .ping{position:absolute;inset:0;border-radius:inherit;border:3px solid transparent;animation:ping 1.1s ease-out 2}
  @keyframes ping{0%{box-shadow:0 0 0 0 #0b65f555}100%{box-shadow:0 0 0 24px transparent}}
  .divider{height:1px;background:var(--border);margin:12px 0}
  .kudos{font-weight:900;background:linear-gradient(135deg,#34d399,var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent}
  
  /* 플레이 화면: 스크롤 없이 한 화면에 맞춤 */
  #screen-play{flex:1;display:flex;flex-direction:column}
  #screen-play .stage{flex:1;display:flex;align-items:center;justify-content:center;max-height:70vh}
  #screen-play video{max-width:100%;max-height:100%;object-fit:contain}
</style>
</head>
<body>
<div class="max">
  <header class="row">
    <h1 class="headline">영상 탐정단의 움직이는 비밀: 진짜가 궁금해요</h1>
    <span class="grow"></span>
    <button id="btn-fullscreen" class="ghost">🖼️ 전체화면</button>
  </header>

  <main class="screens-wrapper">
    <section id="screen-start" class="screen card" role="region" aria-label="시작 화면">
      <h2 style="margin:0">영상 선택하기</h2>
      <div class="grid" id="grid" style="margin-top:16px"></div>
    </section>

    <section id="screen-play" class="screen card" role="region" aria-label="플레이 화면" hidden>
      <div class="row">
        <h2 id="play-title" style="margin:0">플레이</h2>
        <span class="grow"></span>
        <button id="btn-exit" class="ghost">← 처음 화면으로 돌아가기</button>
      </div>

      <div class="sub" id="play-caption">어색한 부분을 찾아 클릭해요!</div>
      <div id="stage" class="stage" tabindex="0" aria-label="단서를 찾는 영역"></div>

      <div id="result" hidden>
        <div class="divider"></div>
        <h3 class="kudos">🎉 진짜 모습 확인 완료!</h3>
        <p class="sub" id="summary">AI가 만든 영상과 실제 영상의 다른 점을 발견했어요.</p>
        <div id="original" class="stage" style="margin-top:10px"></div>
        <div class="row" style="margin-top:12px">
          <button id="btn-replay" class="btn">다시 도전하기</button>
          <span class="grow"></span>
          <button id="btn-other" class="ghost">다른 영상 보기 →</button>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
/* -------------------- 콘텐츠 (영상 경로) -------------------- */
// 💡 아래 fake와 orig에 실제 영상 파일 경로를 넣어주세요.
const CONTENT = [
  { 
    id: 'vid-1',
    // GitHub에 영상을 올리고 그 Raw URL을 사용하시면 됩니다.
    fake: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 AI 영상 경로
    orig: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 원본 영상 경로
    spots: [{x: 50, y: 50, r: 15}] // 정답 좌표
  },
  { 
    id: 'vid-2',
    fake: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 AI 영상 경로
    orig: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 원본 영상 경로
    spots: [{x: 25, y: 70, r: 10}] // 정답 좌표
  },
  { 
    id: 'vid-3',
    fake: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 AI 영상 경로
    orig: 'https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4', // 👈 원본 영상 경로
    spots: [{x: 75, y: 40, r: 12}, {x: 85, y: 80, r: 8}] // 정답 좌표 2개
  },
];
</script>

<script>
/* -------------------- 앱 로직 (이 부분은 수정할 필요 없어요) -------------------- */
const qs = s => document.querySelector(s);
const $start = qs('#screen-start');
const $play  = qs('#screen-play');
const $grid  = qs('#grid');
const $stage = qs('#stage');
const $original = qs('#original');
const $result   = qs('#result');
const $playTitle = qs('#play-title');

let ROUND = { item: null, lock: false, nextIndex: 0 };

// 화면 전환
function navPlay(on){ 
  $start.hidden = on; 
  $play.hidden = !on;
  // 화면 전환 시 모든 비디오 정지
  document.querySelectorAll('video').forEach(v => v.pause());
}

// 시작 화면 만들기
function buildGrid() {
  $grid.innerHTML = '';
  CONTENT.forEach((item, index) => {
    const d = document.createElement('div');
    d.className = 'thumb';
    // 썸네일용 비디오 태그. muted, playsinline, autoplay는 자동재생을 위함
    d.innerHTML = `
      <video src="${item.fake}" muted playsinline autoplay loop></video>
      <button class="ghost">${index + 1}번 영상 도전</button>
    `;
    d.querySelector('button').onclick = () => playVideo(index);
    $grid.appendChild(d);
  });
}

// 특정 영상 플레이 시작
function playVideo(index) {
  const item = CONTENT[index];
  ROUND = { item: item, lock: false, nextIndex: (index + 1) % CONTENT.length };
  
  $result.hidden = true;
  $playTitle.textContent = `🎬 ${index + 1}번 영상 탐색 중`;

  // 스테이지에 비디오 생성
  $stage.innerHTML = '';
  const video = document.createElement('video');
  video.src = item.fake;
  video.autoplay = true;
  video.loop = true;
  video.muted = true;
  video.playsinline = true;
  $stage.appendChild(video);
  
  $stage.onclick = onStageClick;
  qs('#btn-exit').onclick = () => navPlay(false);

  navPlay(true);
}

// 스테이지(영상) 클릭 이벤트
function onStageClick(e) {
  if (ROUND.lock) return;
  const rect = $stage.getBoundingClientRect();
  const x = ((e.clientX - rect.left) / rect.width) * 100;
  const y = ((e.clientY - rect.top) / rect.height) * 100;

  const isCorrect = (ROUND.item.spots || []).some(
    h => Math.hypot(x - h.x, y - h.y) <= (h.r || 10)
  );

  if (isCorrect) {
    onWin();
  } else {
    // 오답 클릭 시 효과 (선택사항)
    const ring = document.createElement('div');
    ring.className = 'hotspot';
    ring.style.left = x + '%';
    ring.style.top = y + '%';
    ring.style.opacity = 1;
    $stage.appendChild(ring);
    setTimeout(() => ring.remove(), 1000);
  }
}

// 정답 맞혔을 때
function onWin() {
  ROUND.lock = true;
  $result.hidden = false;
  
  // 기존 영상 정지
  $stage.querySelector('video')?.pause();

  // 원본 영상 보여주기
  $original.innerHTML = '';
  const origVideo = document.createElement('video');
  origVideo.src = ROUND.item.orig;
  origVideo.controls = true; // 컨트롤러 표시
  origVideo.autoplay = true;
  $original.appendChild(origVideo);

  // 버튼 설정
  qs('#btn-replay').onclick = () => playVideo(CONTENT.indexOf(ROUND.item));
  qs('#btn-other').onclick = () => {
      // 모든 영상 클리어 시 처음으로, 아니면 다음 영상
      if (CONTENT.every(item => item.cleared)) {
          navPlay(false);
      } else {
          playVideo(ROUND.nextIndex);
      }
  };
}


// 초기화
(function init() {
  buildGrid();
  qs('#btn-fullscreen').onclick = () => {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  };
})();
</script>
</body>
</html>
